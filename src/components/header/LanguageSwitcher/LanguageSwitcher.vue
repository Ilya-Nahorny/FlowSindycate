<template>
  <button
    class="language-switcher"
    @click="toggleLanguage"
  >
    <span class="language-switcher__icon">ğŸŒ</span>
    <span class="language-switcher__text">{{ currentLocale.toUpperCase() }}</span>
  </button>
</template>

<script setup lang="ts">
import { useI18n } from 'vue-i18n'
import { computed } from 'vue'

/**
 * ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ·Ñ‹ĞºĞ¾Ğ²
 * ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ EN, PL Ğ¸ RU
 */

const { locale } = useI18n()

// Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ ÑĞ·Ñ‹ĞºĞ¸
const availableLanguages = ['en', 'pl', 'ru'] as const

// Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒ
const currentLocale = computed(() => locale.value)

/**
 * ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ·Ñ‹ĞºĞ°
 */
const toggleLanguage = () => {
  const currentIndex = availableLanguages.indexOf(locale.value as typeof availableLanguages[number])
  const nextIndex = (currentIndex + 1) % availableLanguages.length
  locale.value = availableLanguages[nextIndex]
}
</script>

<style scoped lang="scss">
@import './LanguageSwitcher.styles.scss';
</style>
